# GitHub Actions Docker å‘å¸ƒå·¥ä½œæµç¨‹

## æ¦‚è¿°

å·²ä¸ºé¡¹ç›®æ·»åŠ äº†è‡ªåŠ¨åŒ–çš„Dockeré•œåƒæ„å»ºå’Œå‘å¸ƒåŠŸèƒ½ï¼Œé€šè¿‡GitHub Actionså®ç°CI/CDæµç¨‹ã€‚

## æ–°å¢æ–‡ä»¶

1. **`.github/workflows/docker-publish.yml`** - GitHub Actionså·¥ä½œæµç¨‹æ–‡ä»¶
2. **`docs/GITHUB_ACTIONS_SETUP.md`** - è¯¦ç»†çš„è®¾ç½®å’Œä½¿ç”¨æŒ‡å—

## ä¸»è¦åŠŸèƒ½

### ğŸ”„ è‡ªåŠ¨åŒ–æ„å»º
- æ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯æ—¶è‡ªåŠ¨è§¦å‘
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`ï¼‰æ—¶è‡ªåŠ¨å‘å¸ƒ
- æ”¯æŒæ‰‹åŠ¨è§¦å‘æ„å»º

### ğŸ³ å¤šæ³¨å†Œè¡¨å‘å¸ƒ
- **GitHub Packages**: `ghcr.io/zym9863/time-series-insight-assistant`
- **Docker Hub**: éœ€è¦é…ç½®æ‚¨çš„Docker Hubå‡­æ®

### ğŸ—ï¸ å¤šå¹³å°æ”¯æŒ
- `linux/amd64` (x86_64)
- `linux/arm64` (ARM64)

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- ä½¿ç”¨Trivyè¿›è¡Œå®¹å™¨å®‰å…¨æ‰«æ
- å°†å®‰å…¨æ‰«æç»“æœä¸Šä¼ åˆ°GitHub Securityæ ‡ç­¾
- ä»…åœ¨æ¨é€æ—¶å‘å¸ƒé•œåƒï¼ˆPRä¸ä¼šå‘å¸ƒï¼‰

### ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾
- `latest`: æœ€æ–°çš„mainåˆ†æ”¯ç‰ˆæœ¬
- `v1.0.0`: è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ‡ç­¾
- `main`, `develop`: åˆ†æ”¯ç‰¹å®šæ ‡ç­¾
- `main-abc123`: åˆ†æ”¯+æäº¤å“ˆå¸Œæ ‡ç­¾

## å¿«é€Ÿå¼€å§‹

### 1. è®¾ç½®Docker Hub Secrets

åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹secretsï¼š

- `DOCKERHUB_USERNAME`: æ‚¨çš„Docker Hubç”¨æˆ·å
- `DOCKERHUB_TOKEN`: Docker Hubè®¿é—®ä»¤ç‰Œ

### 2. ä½¿ç”¨é¢„æ„å»ºé•œåƒ

```bash
# ä»GitHub Packagesæ‹‰å–
docker pull ghcr.io/zym9863/time-series-insight-assistant:latest

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 ghcr.io/zym9863/time-series-insight-assistant:latest
```

### 3. åˆ›å»ºç‰ˆæœ¬å‘å¸ƒ

```bash
# åˆ›å»ºå¹¶æ¨é€ç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.0
git push origin v1.0.0
```

è¿™å°†è‡ªåŠ¨ï¼š
- æ„å»ºå¤šå¹³å°é•œåƒ
- å‘å¸ƒåˆ°ä¸¤ä¸ªæ³¨å†Œè¡¨
- è¿è¡Œå®‰å…¨æ‰«æ
- æµ‹è¯•é•œåƒ
- åˆ›å»ºGitHub Release

## ç›¸å…³æ–‡æ¡£

- [GitHub Actions è®¾ç½®æŒ‡å—](./docs/GITHUB_ACTIONS_SETUP.md) - è¯¦ç»†çš„é…ç½®å’Œä½¿ç”¨è¯´æ˜
- [Docker éƒ¨ç½²æŒ‡å—](./docs/DOCKER_DEPLOYMENT.md) - å·²æ›´æ–°ï¼ŒåŒ…å«é¢„æ„å»ºé•œåƒçš„ä½¿ç”¨æ–¹æ³•

## å·¥ä½œæµç¨‹çŠ¶æ€

å¯ä»¥åœ¨ä»“åº“çš„ "Actions" æ ‡ç­¾ä¸­æŸ¥çœ‹å·¥ä½œæµç¨‹çš„æ‰§è¡ŒçŠ¶æ€å’Œæ—¥å¿—ã€‚

## æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. Docker Hub secretsæ˜¯å¦æ­£ç¡®è®¾ç½®
2. æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. Dockerfileæ˜¯å¦æœ‰è¯­æ³•é”™è¯¯
4. ä¾èµ–é¡¹æ˜¯å¦å¯ä»¥æ­£å¸¸å®‰è£…

## è´¡çŒ®

å¦‚æœæ‚¨æƒ³æ”¹è¿›å·¥ä½œæµç¨‹ï¼Œè¯·ï¼š

1. Fork ä»“åº“
2. åˆ›å»ºfeatureåˆ†æ”¯
3. ä¿®æ”¹ `.github/workflows/docker-publish.yml`
4. æäº¤Pull Request

---

**æ³¨æ„**: é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥æ„å»ºå’Œç¼“å­˜ä¾èµ–é¡¹ã€‚åç»­æ„å»ºä¼šæ›´å¿«ï¼Œå› ä¸ºä½¿ç”¨äº†GitHub Actionsç¼“å­˜ã€‚
